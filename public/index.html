<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTC Call API Example</title>
</head>
<style>
    iframe {
        border: none;
    }
</style>

<body>
    <div id="call-container"></div>

    <!-- Include thet bundled JavaScript file -->
    <script src="rtccallapi_external.js"></script>
    <!-- <script defer
        src="https://github.com/Zarttech-main/rtc-call-iframe-api/blob/main/dist/rtccallapi_external.js"></script> -->
    <script>
        // Ensure the script runs after the bundle is loaded
        let participant = {};
        document.addEventListener('DOMContentLoaded', () => {
            // Define the options for the RTCCallApi instance
            const options = {
                callId: '12345',
                containerId: 'call-container',
                userConfig: {
                    displayName: 'Stanley Joel',
                    jobId: (Math.random() * 100).toString('32').replace('.', ''),
                    profilePicuteUrl: '',
                    color: '#56f34d'
                },
                interfaceConfig: {
                    width: '400px',
                    height: '40%',
                    title: 'Test Call',
                    subtitle: 'Iframe Api',
                    muteCam: true,
                    muteMic: true
                }
            };

            // Create an instance of the RTCCallApi class from the exposed library
            const rtcCallApi = new RTCCallApiLibrary.RTCCallApi(options);

            // Add event listeners
            rtcCallApi.addEventListener('participantLeft', (data) => {
                console.log('Connected to the call.', data);
            });

            rtcCallApi.addEventListener('participantJoined', (data) => {
                console.log('participant: ', participant)
                console.log('participant joined event: ', data);
                participant = data.participant;
                console.log('participant: ', participant)
            });
            rtcCallApi.addEventListener('newPeer', (data) => {
                console.log('new peer added: ', data)
            });
            rtcCallApi.addEventListener('isRejoining', (data) => {
                console.log('user rejoining: ', data)
            })
            // rtcCallApi.addEventListener('isRejoining', (data) => {
            //     console.log('user rejoining: ', data)
            // })
            // rtcCallApi.addEventListener('isRejoining', (data) => {
            //     console.log('user rejoining: ', data)
            // })
            // rtcCallApi.addEventListener('isRejoining', (data) => {
            //     console.log('user rejoining: ', data)
            // })

            // Send commands
            // rtcCallApi.sendCommand(RTCCallApiLibrary.RTC_CALL_COMMANDS.START_CALL, { someData: 'example' });
        });
    </script>
</body>

</html>